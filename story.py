# story.py
import discord
import json
import os
from character import Character

DATA_FILE = "user_data.json"

# --- ë©”ì¸ ìŠ¤í† ë¦¬ ë°ì´í„° ---
MAIN_STORY = [
    {
        "id": 1,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - í”„ë¡¤ë¡œê·¸",
        "story": (
            "ë‹¹ì‹ ì€ ë‚´ë ¤ì™”ë‹µë‹ˆë‹¤. ë„ì°©í–ˆìŠµë‹ˆë‹¤. ë³„ì´ ë‚´ë¦° ì€í˜œë¡œ, ê¸°ì›ì˜ ìŒì„±ìœ¼ë¡œ.\n"
            "ë‹¹ì‹ ì€ ì´ê³³ì˜ ì£¼ë¯¼ì´ëë‹ˆë‹¤. ì´ë¯¸ í’ì¡±í–ˆê³ , ì´ë¯¸ í–‰ë³µí•´ì„œ ì•„ë¬´ë„ ë– ë‚˜ì§€ ì•ŠëŠ” ê³³.\n"
            "í‰í™”ê°€ ì˜ì›íˆ ì§€ì†ë  ê³³ì—ì„œ ë³´ì¸ ê±´, ì‘ì€ ì›ë… í•œ ë§ˆë¦¬ì˜€ìŠµë‹ˆë‹¤.\n"
            "í‰í™”ì— ë‹¤ì‹œê¸ˆ ì‹¤ê¸ˆì´ ìƒê¸°ê³ , ì•„ë§ˆë„ ë‹¹ì‹ ì€ ì´ ê¸ˆì„ ë¬´ì‹œí•  ìˆ˜ ì—†ì„ í…Œì§€ìš”."
        ),
        "type": "kill",
        "target": "ì•½í•œ ì›ë…",
        "count": 20
    },
    {
        "id": 2,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì›ë…ì˜ í”ì ",
        "story": (
            "ì›ë…ì´ í•œ ë§ˆë¦¬ê°€ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. ìƒê°ë³´ë‹¤ ë§ì•˜ê³ , ì´ í‰í™”ì˜ ë•…ì„ ì°¾ì•„ë‚¸ ëª¨ì–‘ì…ë‹ˆë‹¤.\n"
            "ê·¸ë“¤ì€ ì•½í–ˆì§€ë§Œ ì•…ì˜ë¥¼ ê°€ì§€ê³  ìˆì—ˆê³ , ì´ê³³ì„ ì¹¨ë²”í•˜ë ¤ í–ˆìŠµë‹ˆë‹¤.\n"
            "ê·¸ë“¤ì´ ê³ ë¥¸ ì´ë™ìˆ˜ë‹¨ì€ ë°”ëŒë¹„ëë‹ˆë‹¤. ê·¸ë“¤ì´ ê°€ì§„ ë§ˆìŒì˜ ê¸¸ì„ ìƒê²Œ ë§Œë“¤ê³ , ê³„íšì— ì´ìš©í•©ë‹ˆë‹¤. ì´ë“¤ì˜ ëª©ì ì€ ë¬´ì—‡ì¼ê¹Œìš”?"
        ),
        "type": "kill_multi",
        "targets": {"ê¸¸ ìƒì€ ë°”ëŒë¹„": 10, "ì•½í•œ ì›ë…": 10}
    },
    {
        "id": 3,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‚¬ì œ ì¹´ì´ì•ˆ",
        "story": (
            "ê·¸ë“¤ì´ í–¥í•˜ë ¤ ë“  ê³³ì€ ì‹œê°„ì˜ ì‹ ì „ì´ì—ˆìŠµë‹ˆë‹¤.\n"
            "ì›ë…ì—ê²Œ ë‘˜ëŸ¬ì‹¸ì¸ ë‹¹ì‹ ì„ êµ¬í•´ì¤€ ê±´ ì‚¬ì œì¸ 'ì¹´ì´ì•ˆ'.\n"
            "ì¹´ì´ì•ˆì€ ìµœê·¼ ëŠ˜ì–´ë‚œ ì›ë… ë•Œë¬¸ì— ê³¨ë¨¸ë¦¬ë¥¼ ì•“ê³  ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ê±±ì •ë˜ëŠ” ì‚¬ëŒì´ ë„ˆë¬´ ë§ì•„, ê·¸ë“¤ì˜ ì•ˆë¶€ë¥¼ ì•Œê³  ìˆì§€ ì•Šìœ¼ë©´ ë¶ˆì•ˆí•˜ë‹¤ê³  í•©ë‹ˆë‹¤.\n"
            "ê·¸ì˜ ë¶ˆì•ˆì„ ê°€ë¼ì•‰ê²Œ ë§Œë“¤ ìš”ì†Œê°€ í•„ìš”í•©ë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì¶”ì–µì‚¬ì§„ì²©": 2}
    },
    {
        "id": 4,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ê³µëª…",
        "story": (
            "ì‚¬ì œ ì¹´ì´ì•ˆì˜ ê°ì‚¬ë¥¼ ë°›ê³  ë³´ìƒìœ¼ë¡œ ì‘ì€ ì¡°ê°ì„ ë°›ì€ ë‹¹ì‹ ì€ ë‹¤ì‹œ ê³ í–¥ìœ¼ë¡œ ëŒì•„ê°”ìŠµë‹ˆë‹¤.\n"
            "ê³ í–¥ì˜ ì‚¬ëŒë“¤ ì¤‘ì— ì´ ì¡°ê°ì— ëŒ€í•´ ì•„ëŠ” ì‚¬ëŒì´ ìˆì„ì§€ë„ ëª¨ë¥´ë‹ˆê¹Œìš”.\n"
            "ìŒì„±ì— ë°œì„ ë”›ì, ì‘ì€ ì¡°ê°ì´ ëŒ€ë¥™ê³¼ ê³µëª…í•´ ë•… ë°‘ì˜ ìŠ¬í””ì„ ë„ì§‘ì–´ëƒ…ë‹ˆë‹¤."
        ),
        "type": "kill",
        "target": "ì£¼ì‹ ì˜ ëˆˆë¬¼ë°©ìš¸",
        "count": 5
    },
    {
        "id": 5,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‘ì€ ìœ„ì•ˆ",
        "story": (
            "ê³µëª…í–ˆë˜ ê±´ ì´ ì„¸ìƒì„ ë§Œë“¤ì—ˆë‹¤ëŠ” ì£¼ì‹ ë“¤ì˜ ìŠ¬í””ì´ì—ˆìŠµë‹ˆë‹¤.\n"
            "ê·¸ë“¤ì˜ ë¹„íƒ„ì— ì‹¬ì‹¬í•œ ìœ„ë¡œë¥¼ ê±´ë„¨ ë‹¹ì‹ ì˜ í–‰ë™ì— ëˆˆë¬¼ì´ ë‹¤ì‹œê¸ˆ ì ì— ë“­ë‹ˆë‹¤.\n"
            "ì•„ì§ ìœ„ë¡œí•  ëˆˆë¬¼ì´ ë§ì´ ë‚¨ì€ ê²ƒ ê°™ì§€ë§Œ, ë‹¹ì‹ ì˜ ëª©í‘œëŠ” ì´ë“¤ì—ê²Œ ìœ„ì•ˆì„ ì£¼ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤."
        ),
        "type": "region_unlock",
        "target_region": "ì¼í•œì‚° ì¤‘í„±"
    },
    {
        "id": 6,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‘ì€ ìƒˆ",
        "story": (
            "ê³ í–¥ì˜ ì‚¬ëŒë“¤ë„ ì‘ì€ ì¡°ê°ì— ëŒ€í•´ ì•„ëŠ” ê²ƒì´ ì—†ì—ˆìŠµë‹ˆë‹¤.\n"
            "ì£¼ì‹ ì˜ ìŠ¬í””ì„ ëŒì–´ë‚¼ ì •ë„ì˜ í˜ì„ ê°€ì§€ê³  ìˆìœ¼ë‹ˆ, ë¶„ëª… ì›ë…ì„ ëª°ì•„ë‚´ëŠ” ë°ì—ë„ íš¨ê³¼ê°€ ìˆì„ ê²ë‹ˆë‹¤.\n"
            "ì´ë¥¼ ì•Œê³  ìˆì„ ì‚¬ëŒì„ ì°¾ì•„ ì—¬ì •ì„ ë– ë‚©ë‹ˆë‹¤."
        ),
        "type": "kill_any_in_region",
        "region": "ì¼í•œì‚° ì¤‘í„±",
        "count": 20
    },
    {
        "id": 7,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë™í–‰",
        "story": (
            "ë‹¹ì‹ ì´ ì¼í•œì‚°ì„ ë“±ë°˜í•˜ë˜ ì¤‘ì´ì—ˆìŠµë‹ˆë‹¤.\n"
            "í—˜ì¤€í•œ ì‚°ì— ì–´ìš¸ë¦¬ì§€ ì•ŠëŠ”, ë³´ëë¹› ì‹ ë¹„ë¡œìš´ ê¹ƒí„¸ì˜ ìƒˆ í•œ ë§ˆë¦¬ê°€ ë‹¹ì‹ ì„ ë°”ë¼ë´…ë‹ˆë‹¤.\n"
            "ë”°ë¼ì˜¤ë¼ëŠ” ê²ƒì¼ê¹Œìš”? ìƒˆì˜ ì•ˆë‚´ì— ë”°ë¼, ì‚°ì˜ ì‰¬ìš´ ê¸¸ë§Œì„ ì°¾ì•„ ë‚˜ì•„ê°‘ë‹ˆë‹¤."
        ),
        "type": "recruit",
        "target_char": "ì˜ì‚°" 
    },
    {
        "id": 8,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - í¬ìœ„ë˜ë‹¤",
        "story": (
            "ìƒˆì˜ ì•ˆë‚´ì— ë”°ë¼ ì¼í•œì‚°ì˜ ë´‰ìš°ë¦¬ë¥¼ ë„˜ìœ¼ë‹ˆ, ë°”ë¼ì‚¬ì´Œ ì˜ì‚°ì´ ë‹¹ì‹ ì˜ ì—¬ì •ì— í•©ë¥˜í•©ë‹ˆë‹¤.\n"
            "ì´ ë•Œ ë§ˆì£¼ì¹œ ê±´ êµ´ë ˆëŠ‘ëŒ€ ë¬´ë¦¬. êµ¶ì£¼ë¦° ì±„ ì˜¤ëœ ì‹œê°„ì´ ì§€ë‚¬ë˜ ë¬´ë¦¬ëŠ”, í•œ ì¹˜ì˜ ë§ì„¤ì„ë„ ì—†ì´ ì¼í–‰ì„ ìŠµê²©í•©ë‹ˆë‹¤."
        ),
        "type": "kill_group", 
        "targets": ["êµ´ë ˆëŠ‘ëŒ€", "êµ´ë ˆëŠ‘ëŒ€ ìš°ë‘ë¨¸ë¦¬"],
        "display_name": "êµ´ë ˆëŠ‘ëŒ€",
        "count": 20
    },
    {
        "id": 9,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì¼í•œì‚° ì •ìƒ",
        "story": (
            "êµ´ë ˆëŠ‘ëŒ€ ë¬´ë¦¬ë¥¼ ê°„ì‹ íˆ ë–¨ì³ë‚¸ í›„, ë³´ëë¹› ìƒˆëŠ” ì¼í–‰ì„ ì •ìƒìœ¼ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.\n"
            "ì •ìƒì—ì„œ ë°”ë¼ë³¸ í•˜ëŠ˜ì€ ë§‘ê³ , ê¹Œë§£ê³ , ë¹›ë‚¬ìŠµë‹ˆë‹¤.\n"
            "ê·¸ ì¤‘ í•˜ë‚˜ì˜ ë³„ì´ ìœ ë… ëˆˆì— ë±ë‹ˆë‹¤."
        ),
        "type": "region_unlock",
        "target_region": "ì´ë£¨ì§€ ëª»í•œ ê¿ˆë“¤ì˜ ë³„"
    },
    {
        "id": 10,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ê¿ˆì˜ ë³„",
        "story": (
            "ì‘ì€ ì¡°ê°ì´ ë–¨ë¦¬ë”ë‹ˆ, ì¼í–‰ì„ ê·¸ ë³„ì— ë³´ë‚´ì¤ë‹ˆë‹¤.\n"
            "í¬ë§ì„ ìƒì€ ëª¨ìŠµì…ë‹ˆë‹¤. ì´ë¤„ì§€ê³  ì‹¶ì—ˆë˜, ì´ë£° ìˆ˜ ì—†ì—ˆë˜ ê¿ˆì´ í‘¸ë¥´ê²Œ ë¹›ë‚©ë‹ˆë‹¤.\n"
            "ì´ ë³„ì—ì„œ ë¹ ì ¸ë‚˜ê°€ê³  ë“¤ì–´ì˜¤ëŠ” ê±´ ê·¸ë¦¬ ì–´ë µì§€ ì•Šì€ ëª¨ì–‘ì…ë‹ˆë‹¤.\n"
            "ì™¸ë¡œìš´ ì™€ì¤‘ì—ë„ ì¼ìƒì„ ì§€ì¼œì£¼ê³  ì‹¶ì—ˆë˜ ê±¸ê¹Œìš”?"
        ),
        "type": "item",
        "req_items": {"ë‹¤ì •í•¨ í•œ ìŠ¤í‘¼": 5}
    },
    {
        "id": 11,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‹ ì „ ì¡°ì‚¬",
        "story": (
            "ë³„ì—ê²Œ ë‹¤ì •í•¨ì„ ì•½ê°„ ë¿Œë ¤ ì£¼ë‹ˆ, ë§ˆì¹˜ ê³ ë§™ë‹¤ê³  ëŒ€ë‹µì´ë¼ë„ í•˜ë“¯ ì€ì€íˆ ë¹›ë‚©ë‹ˆë‹¤.\n"
            "ì •ì‹ ì„ ì°¨ë¦¬ë‹ˆ ë‹¤ì‹œ ì‹œê°„ì˜ ì‹ ì „. ì¼í–‰ì€ ì‹œê°„ì˜ ì‹ ì „ì„ í•œ ë²ˆ ë‘˜ëŸ¬ë³´ê¸°ë¡œ í•©ë‹ˆë‹¤.\n"
            "ì›ë…ì˜ ëª©ì ì„ ì´í•´í•˜ê³ , ì´ ì„¸ìƒì˜ ë¹„ë°€ì— ì¡°ê¸ˆ ë‹¤ê°€ì„¤ ìˆ˜ ìˆê²Œë”."
        ),
        "type": "investigate",
        "region": "ì‹œê°„ì˜ ì‹ ì „",
        "count": 150
    },
    {
        "id": 12,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‹œê°„ì˜ ì‹ í™”",
        "story": (
            "ì´ ì‹ ì „ì€ ë„¤ ëª…ì˜ ì£¼ì‹  ì¤‘ ë‘˜ì§¸, 'ì‹œê°„ì˜ ì‹ í™”'ë¥¼ ê¸°ë¦¬ê³  ì„¬ê¸°ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì‹ ì „ì´ì—ˆìŠµë‹ˆë‹¤.\n"
            "ë¨¼ ì˜›ë‚ , ì‹œê°„ì˜ ì‹ í™”ëŠ” ì›ë…ì„ ëª°ì•„ë‚´ê³  ì‚¬ëŒë“¤ì—ê²Œ ìƒˆ ì‚¶ì„ ì„ ë¬¼í–ˆë‹µë‹ˆë‹¤.\n"
            "í•˜ì§€ë§Œ ì´í›„ í”ì ë„ ì—†ì´ ì‚¬ë¼ì ¸ ë²„ë ¸ê³ , ê·¸ì˜ ìœ„ì—…ì„ ìŠì§€ ì•Šì€ ì´ë“¤ì´ ì‹ ì „ì„ ë§Œë“  ê²ƒì´ì—ˆìŠµë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì‹ í™”ì˜ ë°œìì·¨": 5}
    },
    {
        "id": 13,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‘ì€ ë„ì›€",
        "story": (
            "ì´ ê³³ì€ ì—¬ì „íˆ ì‹œê°„ì˜ ì‹ í™”ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ì¼í–‰ ì—­ì‹œë„ ì‹œê°„ì˜ ì‹ í™”ì˜ í˜ì´ í•„ìš”í•  ì§€ë„ ëª¨ë¥´ëŠ” ì¼ì…ë‹ˆë‹¤.\n"
            "ì£¼ì‹ ì´ ëˆì„ ì¢‹ì•„í• ì§€ëŠ” ì˜ ëª¨ë¥´ê² ìœ¼ë‚˜, ê·¸ë“¤ì´ ì‚¬ë¼ì§„ ì£¼ì‹ ì„ ì°¾ì•„ë‚¼ ìˆ˜ ìˆê²Œë” í˜ì„ ë³´íƒœëŠ” ê²ƒë„ ë‚˜ì˜ì§€ ì•Šì€ ì¼ì¸ ë“¯ í•©ë‹ˆë‹¤."
        ),
        "type": "money_donate",
        "amount": 100000
    },
    {
        "id": 14,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì§‘ê²°ì˜ ì´ìœ ",
        "story": (
            "ì›ë…ì€ ì–´ì§¸ì„œ ìŒì„±ì— ëª¨ì—¬ë“¤ì—ˆì„ê¹Œìš”? ë¬´ì—‡ì„ ìœ„í•´ ì‹œê°„ì˜ ì‹ ì „ì„ ìŠµê²©í–ˆì„ê¹Œìš”?\n"
            "ì¶”ì¸¡ì„ í–ˆë‹µë‹ˆë‹¤. ê·¸ ì›ë…ì˜ ìœ ì–¸ì„ ë“£ê³ .\n\n"
            "'ì‹œê°„ì€ ìš°ë¦¬ë¥¼ ë³´ê³  ìˆì§€ ì•Šì•„.'\n\n"
            "ì£¼ì‹ ì´ ì„¸ìƒì— ë“± ëŒë ¸ë‹¤ëŠ” ì¦ê±°ë¥¼ ìœ„í•´, ì´ê³³ì„ ì§€ì¼œì¤„ ë³„ì€ ì–´ë””ì—ë„ ì—†ë‹¤ëŠ” í™•ì‹ ì„ ìœ„í•´\n"
            "ëª°ë ¤ë“  ê²ƒì´ì—ˆìŠµë‹ˆë‹¤."
        ),
        "type": "kill_multi",
        "targets": {"ê³¼ê±°ì˜ ë§ì§‘": 3, "êµ¬ì²´í™”ëœ ì•…ëª½": 3}
    },
    {
        "id": 15,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‚¬ì œì˜ ë¬´ê²Œ",
        "story": (
            "ì¹´ì´ì•ˆì—ê²Œ ì¼ëŸ¬ë‘ì—ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ìƒê°ì„ ë§ì´ì—ìš”.\n"
            "ì¹´ì´ì•ˆì´ ê³§ ìš¸ ë“¯í•œ ëª©ì†Œë¦¬ë¡œ ìŠ¬í¼í•©ë‹ˆë‹¤. ì–´ì§¸ì„ ì§€ ëˆˆë¬¼ì„ í˜ë¦¬ì§€ëŠ” ëª»í•©ë‹ˆë‹¤.\n"
            "ê·¸ê°€ ì‹œê°„ì€ ìš°ë¦¬ë¥¼ ì €ë²„ë¦¬ì§€ ì•Šì•˜ë‹¤ í•©ë‹ˆë‹¤.\n"
            "ì‹ ì „ì„ ëŒë³´ëŠ” ì‚¬ì œì˜€ê¸°ì— ì•„ëŠ” ê²ƒì´ ìˆì—ˆë˜ ê±¸ê¹Œìš”?"
        ),
        "type": "kill_any_in_region",
        "region": "ì‹œê°„ì˜ ì‹ ì „",
        "count": 20
    },
    {
        "id": 16,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ëŒ€í™”ì˜ í•„ìš”ì„±",
        "story": (
            "ì‹ ì€ ìš°ë¦¬ë¥¼ ë²„ë ¸ì„ê¹Œìš”? ì›ë…ë“¤ì€ ë²„ë¦¼ë°›ì•˜ë‹¤ëŠ” ìŠ¬í””ì„ ë°›ê³  ë³µìˆ˜ë¥¼ ê¾€í–ˆë˜ ê±¸ê¹Œìš”?\n"
            "ê·¸ë“¤ì˜ ìƒê°ì€ ì–´ë–¨ê¹Œìš”? ê·¸ë“¤ì€ ì–´ì©Œë‹¤ ì•…ì„ ìì²˜í–ˆë‚˜ìš”?\n"
            "ëŒ€í™”ì˜ í•„ìš”ë¥¼ ëŠë‚ë‹ˆë‹¤. ë§ˆëƒ¥ ì“°ëŸ¬ëœ¨ë¦¬ê¸°ë§Œ í•  ìƒëŒ€ê°€ ì•„ë‹˜ì„ ê¹¨ë‹¬ì•˜ë˜ ê±¸ì§€ë„ ëª°ë¼ìš”.\n"
            "ë¬¼ë¡ , í­ë ¥ì„ ì™¸ì¹œë‹¤ë©´ ê·¸ë“¤ì—ê²Œ ìë¹„ëŠ” ì—†ê² ì§€ìš”."
        ),
        "type": "kill_include_name",
        "keyword": "ì›ë…",
        "count": 30
    },
    {
        "id": 17,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ê·¸ë“¤ì˜ ì‚¬ì •",
        "story": (
            "ëª¨ë“  ì›ë…ì´ ê°™ì€ ìƒê°ì€ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ëˆ„êµ°ê°€ì™€ ì¹œí–ˆì–´ì„œ, ê°•ìš”ë°›ì•„ì„œ, ìœ í–‰ì´ê¸¸ë˜, í•  ê²Œ ì—†ì–´ì„œ....\n"
            "ëª¨ë‘ê°€ ìš¸ë¶„ì„ ê°€ì§€ì§€ ì•Šê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì£„ì±…ê°ì„ ëŠë¼ëŠ” ì›ë… ì—­ì‹œ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤.\n"
            "ìŠµê²©ì„ ê·¸ë§Œë‘” ì›ë… ì¤‘ ëˆ„êµ°ê°€ê°€ ê·¸ë“¤ì˜ ëª©í‘œë¥¼ ê³µìœ í–ˆìŠµë‹ˆë‹¤."
        ),
        "type": "investigate_multi",
        "targets": {"ê¸°ì›ì˜ ìŒì„±": 20, "ì¼í•œì‚° ì¤‘í„±": 20, "ì´ë£¨ì§€ ëª»í•œ ê¿ˆë“¤ì˜ ë³„": 20}
    },
    {
        "id": 18,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë€íƒ€ë‚˜",
        "story": (
            "\"ì•„ì£¼ ì˜¤ë˜ ì „, ì„¸ìƒì— 200ë…„ì˜ ì¬ì•™ì„ ëª°ê³  ì˜¨ ì›ë…ì´ ìˆì—ˆëŒ€. ì´ë¦„ì€ ë€íƒ€ë‚˜.\"\n"
            "\"ë€íƒ€ë‚˜ê°€ ì“°ë˜ ë§ˆê²€ì¸ 'ì•Œë°ë¼'ë¥¼ ì°¾ì•„ì„œ, ê·¸ë…€ë¥¼ ë‹¤ì‹œ ê¹¨ìš¸ ìƒê°ì¸ ê±°ì•¼.\"\n"
            "\"ë‹¤ì‹œê¸ˆ ì´ ë•…ì—ì„œ í–‡ë¹›ì„ ê±°ë‘ê¸° ìœ„í•´ì„œ....\""
        ),
        "type": "item",
        "req_items": {"ì‘ì€ í…Œë¼ë¦¬ì›€": 10}
    },
    {
        "id": 19,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë‹¹ì—°í•˜ì§€ë§Œ ë‹¹ì—°í•˜ì§€ ì•Šì€",
        "story": (
            "ë€íƒ€ë‚˜ì˜ ì‹¤íŒ¨ì—ëŠ” ì‹œê°„ì˜ ì‹ í™”ì˜ ê°œì…ì´ ìˆì—ˆê¸° ë•Œë¬¸ì´ë¼ê³  í•©ë‹ˆë‹¤.\n"
            "ì¹´ì´ì•ˆì˜ í‘œì •ì€ ë² ì¼ì— ê°€ë ¤ì ¸ ë³¼ ìˆ˜ ì—†ì—ˆì§€ë§Œ, ìŠ¬í¼ ë³´ì´ëŠ” ë“¯ í–ˆì–´ìš”.\n"
            "ë¬´ì—‡ì„ ë§í•  ìˆ˜ ì—†ì—ˆê¸°ì— ì¡°ìš©íˆ ìš¸ê³  ìˆëŠ” ê²ƒì¼ê¹Œìš”?\n"
            "ì˜ì‚°ì´ ê·¸ë¥¼ ìœ„ë¡œí•´ì£¼ë©° ê¸¸ì„ ë‚˜ì•„ê°€ê³ , ë‚´ì¼ì„ ë§ì´í•˜ì˜€ìŠµë‹ˆë‹¤."
        ),
        "type": "region_unlock",
        "target_region": "ìƒëª…ì˜ ìˆ²"
    },
    {
        "id": 20,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì‚¬ë‘ì˜ ì¦ê±°",
        "story": (
            "ì‹ ì´ ì„¸ìƒì„ ì €ë²„ë¦¬ì§€ ì•Šì•˜ë‹¤ëŠ” ì¦ê±°. ê·¸ ì¦ê±°ë§Œ ìˆë‹¤ë©´, ì´ ì´ìƒ ì‹¸ìš°ì§€ ì•Šì„ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œìš”?\n"
            "ê¸°ì›ì˜ ìŒì„±. ì´ ë•…ì— ì›ë…ì´ ë“¤ì–´ì˜¤ê³ , ì‹ ì „ë„ ê·¸ë“¤ì˜ ìš¸ë¶„ì— ë‹¹í–ˆìŠµë‹ˆë‹¤.\n"
            "ì–´ë””ì„œ ì¦ê±°ë¥¼ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œìš”?\n"
            "ë³„ë¹›ì€ ì§€ì¼œì§ˆ ìˆ˜ ìˆì„ê¹Œìš”?"
        ),
        "type": "investigate_with_char",
        "region": "ì¼í•œì‚° ì¤‘í„±",
        "char_name": "ì˜ì‚°",
        "count": 15
    },
    {
        "id": 21,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ìƒëª…ì˜ ìˆ²",
        "story": (
            "ì‹ ì´ë€ ë¬´ì—‡ì¼ê¹Œìš”? ì ˆëŒ€ì  ì¡´ì¬? ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” íƒœì–‘?\n"
            "ì˜¤ë¡œì§€ ë†’ì€ ê³³ì—ì„œë§Œ ìš°ë¦¬ë¥¼ ë‚´ë ¤ë‹¤ë³´ê³ , í¥ë¯¸ê°€ ë–¨ì–´ì§€ë©´ ê³ ê°œë¥¼ ëŒë¦¬ëŠ” ì²­ì¤‘?\n"
            "ë‹¤ë¥´ê²Œ ìƒê°í•  í•„ìš”ê°€ ìˆì„ì§€ë„ ëª°ë¼ìš”.\n"
            "ì˜ì‚°ì€ ì‚¬ì œì—ê²Œ êµ¬í•´ì¡Œê³ , ì¹´ì´ì•ˆì´ ë§í•˜ê¸¸ ì‚¬ì œë€ ì‹ ì˜ í˜ì„ ë¹Œë ¤ ì‚¬ìš©í•˜ëŠ” ì¡´ì¬ë¼ê³  í•©ë‹ˆë‹¤.\n"
            "ì‹ ì€ ìš°ë¦¬ë¥¼ ì™„ì „íˆ ì €ë²„ë¦¬ì§€ ì•Šì€ ê±¸ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.\n\n"
            "ì´ë²ˆì— ë‹¤ë‹¤ë¥¸ ê³³ì€ ë˜ì „ìœ¼ë¡œë„ ë¶ˆë¦¬ëŠ” 'ìƒëª…ì˜ ìˆ²' ì…ë‹ˆë‹¤.\n"
            "ìƒëª…ì˜ ì „ì„¤, ë¥´ë„¤ì•„ì˜ ê¶Œì—­ì¸ ë™ì‹œì—, ëª¨ë“  ìƒë¬¼ì´ ì‚´ì•„ë‚¨ê¸° ìœ„í•´ ì‚¬íˆ¬ë¥¼ ë²Œì´ëŠ” íˆ¬ê¸°ì¥ì´ê¸°ë„ í•˜ì£ ."
        ),
        "type": "kill_any_in_region",
        "region": "ìƒëª…ì˜ ìˆ²",
        "count": 20
    },
    {
        "id": 22,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë°©í™©",
        "story": (
            "ìƒëª…ì˜ ìˆ²ì— ê¹Šê²Œ ë“¤ì–´ì˜¨ ëª¨ì–‘ì…ë‹ˆë‹¤. ë‚˜ê°€ëŠ” ê¸¸ë„, ê¸¸ì„ ì•ˆë‚´í•˜ë˜ ì‘ì€ ìƒˆë„, í–‡ë¹›ë„ ì‹œì„  ë°–ì—ì„œ í©ì–´ì§‘ë‹ˆë‹¤.\n"
            "ëŠê»´ì§€ëŠ” ê±´ ì£½ì–´ê°€ëŠ” ëª¨ë“  ê²ƒì˜ ë§ˆì§€ë§‰ í•œìˆ¨. ì´ ìˆ²ì—ì„œ ì¡°ê¸ˆì˜ ìë¹„ë„ ì°¾ì§€ ëª»í•œ ì±„,\n"
            "ì¡°ê°ì˜ í˜ì—ë§Œ ì˜ì§€í•´ ê¸¸ì„ ì°¾ëŠ” ê²ƒë„ ì§€ì³ê°€ê¸° ì‹œì‘í•©ë‹ˆë‹¤."
        ),
        "type": "kill",
        "target": "êµ¶ì£¼ë¦° í¬ì‹ì",
        "count": 7
    },
    {
        "id": 23,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë¹›ì¤„ê¸°, ê·¸ë¦¬ê³ ..",
        "story": (
            "ë§ˆì§€ë§‰ ì²´ë ¥ë„ ë‹¤í•´ íë¦„ì˜ ì¼ë¶€ê°€ ë˜ê¸° ì „, ì–´ë‘  ì†ì—ì„œ í•œ ì¤„ê¸° ë”°ìŠ¤í•¨ì´ ì•„ë¥¸ê±°ë¦¼ì„ ëŠë‚ë‹ˆë‹¤.\n"
            "ë”°ìŠ¤í•¨ì„ ë™ì•„ì¤„ ì‚¼ì•„ ë„ë‹¬í•œ ê³³ì€, ë¬´ë„ˆì§„ ê±´ë¬¼.\n"
            "ì˜¤ë˜ ì „ì— ë¬´ë„ˆì§„ ê²ƒì²˜ëŸ¼ ë©êµ´ì´ ë¬´ì„±í•˜ì§€ë§Œ ë°©ê¸ˆ ë¬´ë„ˆì§„ ë“¯ ìƒìƒí•œ ëª¨ìŠµì´ ì´ì§ˆê°ì„ ìì•„ëƒ…ë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì‚¶ì˜ ë¬¸ì¥": 5}
    },
    {
        "id": 24,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ìƒëª…ì˜ ì „ì„¤",
        "story": (
            "ê±´ë¬¼ ì™¸ë¶€ì—ëŠ” ìƒëª…ì˜ ìˆ² ë‹µì§€ ì•Šê²Œ ë¬´í•´í•œ ë™ë¬¼ë“¤ì´ ìë¦¬ë¥¼ ì¡ê³  ì‰¬ê³  ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ìƒëª…ì˜ ìˆ² ìµœì‹¬ë¶€ëŠ” ì˜ì™¸ë¡œ ë‹¤ì •í•œ ê³µê°„ì´ì—ˆë˜ ê±¸ê¹Œìš”?\n"
            "ë¬´ë„ˆì§„ ê±´ë¬¼ ì•ˆì— ë‹µì´ ìˆì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤.\n"
            "ê±´ë¬¼ì„ ì§€í‚¤ë˜ í‘¸ë¥¸ ë¨¸ë¦¬ì¹´ë½ì˜ ì—¬ì„±ì´ ì ì‹œ ì¼í–‰ì„ ê²½ê³„í–ˆì§€ë§Œ, ì‘ì€ ì¡°ê°ì„ ë³´ê³ ëŠ” ì‰½ê²Œ ê¸¸ì„ ì—´ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤."
        ),
        "type": "kill_boss_limited_turn",
        "target": "ë¥´ë„¤ì•„",
        "limit_turn": 20,
        "count": 1
    },
    {
        "id": 25,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë¬´ë„ˆì§„ í¬ë§",
        "story": (
            "ë¬´ë„ˆì§„ ê±´ë¬¼ ë‚´ë¶€ì…ë‹ˆë‹¤.\n"
            "ì´ ê±´ë¬¼ì€ ëŒ€ë¹„í•  í‹ˆë„ ì—†ì´ ìˆœì‹ê°„ì— ë¬´ë„ˆì§„ ëª¨ì–‘ì…ë‹ˆë‹¤.\n"
            "ì•„ì´ê°€ ë²½ì— ê·¸ë¦° ë‚™ì„œì™€ ë„í™”ì§€, í¬ë ˆíŒŒìŠ¤ì™€ ì‹ë‹¨í‘œ... ìƒì¼ íŒŒí‹°ë¥¼ ì˜ˆì •í•˜ê³  ìˆì—ˆë˜ ë“¯,\n"
            "ê²Œì‹œíŒì—ëŠ” ìƒì¼ íŒŒí‹°ë¥¼ ì¤€ë¹„í•œë‹¤ëŠ” ë‚´ìš©ë„ ì í˜€ ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ê²°êµ­ ìƒì¼ íŒŒí‹°ëŠ” ì´ê³³ì—ì„œ í•˜ì§€ ëª»í•œ ëª¨ì–‘ì´ì§€ë§Œìš”."
        ),
        "type": "investigate_with_char",
        "region": "ìƒëª…ì˜ ìˆ²",
        "char_name": "ì¹´ì´ì•ˆ",
        "count": 10
    },
    {
        "id": 26,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë‹¤ìŒ ëª©ì ì§€",
        "story": (
            "ì•ˆíƒ€ê¹Œìš´ í”ì ê³¼ ìƒëª…ì˜ ìˆ²ì˜ ëª¨ìŠµì€ ì‹ ì´ ìš°ë¦¬ë¥¼ ì‚¬ë‘í•œë‹¤ëŠ” ì¦ê±°ê°€ ë˜ê¸°ì—ëŠ” ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤.\n"
            "ì´ê³³ì—ì„  ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ë˜ ê±¸ê¹Œìš”? ê±´ë¬¼ì€ ê²°ê³¼ë§Œì„ ì¼ëŸ¬ì¤„ ë¿, ê³¼ì •ì„ ì•Œë ¤ì£¼ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n"
            "ì¼í–‰ì€ ì›ë…ì´ í–¥í•  ë‹¤ìŒ í–‰ì„ ì§€, ê³µê°„ì˜ ì‹ ì „ìœ¼ë¡œ í–¥í•˜ê¸°ë¡œ í•©ë‹ˆë‹¤.\n\n"
            "**[ì‹ ê·œ ì§€ì—­ ì˜ˆê³ : ì•„ë¥´ì¹´ì›Œë“œ ì œë„]**"
        ),
        "type": "recruit",
        "target_char": "ìƒ¤ì¼ë¼"
    },
    {
        "id": 27,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ê³„ì†ë˜ëŠ” ê±¸ìŒ",
        "story": (
            "ê³µê°„ì˜ ì‹ ì „ìœ¼ë¡œ í–¥í•˜ê¸° ìœ„í•´ì„œëŠ”, ê³µê°„ì˜ ì‹ ì „ì´ ì–´ë””ì— ìˆëŠ”ì§€ë¶€í„° ì•Œì•„ì•¼ í–ˆìŠµë‹ˆë‹¤.\n"
            "ì‹ ì „ì´ ì–´ë””ì— ìˆëŠ”ì§€ ê°ë„ ì¡íˆì§€ ì•Šì•„ ìš°ì™•ì¢Œì™•í•˜ëŠ” ì‚¬ì´, ì˜ì‚°ì´ ë²ˆëœ©ì´ëŠ” ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•©ë‹ˆë‹¤.\n"
            "\"ì‹ ë“¤ì€ ì ì–´ë„ ìê¸° ì‚¬ëŠ”ê³³ë§Œí¼ì€ ì†Œì¤‘í•˜ê²Œ ì—¬ê¹ë‹ˆë‹¤ìš”! ì¼ë‹¨ ëˆ„êµ°ê°€ì˜ ê°€í˜¸ë¥¼ ë°›ëŠ” ê²ƒ ê°™ì€, ì´ˆìì—° í˜„ìƒì´ ì¼ì–´ë‚˜ëŠ” ê³³ì„ ì°¾ì•„ë³´ëŠ” ê²Œ ì–´ë–»ìŠµë‹ˆê¹Œ?\""
        ),
        "type": "item",
        "req_items": {"ë‘ë£¨ë§ˆë¦¬ ì¢…ì´": 40, "ì‹ í™”ì˜ ë°œìì·¨": 4}
    },
    {
        "id": 28,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì²« ë²ˆì§¸ ê¶Œì—­",
        "story": (
            "ê¸°ì›ì˜ ìŒì„±ì²˜ëŸ¼ ì‹ ë“¤ì˜ ë³´í˜¸ë¥¼ ë°›ëŠ” ê³³ì€ í•­ìƒ í¬ê³  ì‘ì€ ë§ˆë²•ì´ ìˆê¸° ë§ˆë ¨ì…ë‹ˆë‹¤.\n"
            "ë‚˜ê³  ìë€ ê³³ì´ ìŒì„±ì¸ë§Œí¼, ë‹¹ì‹ ì€ ê°€í˜¸ë¥¼ ë°›ì€ ë•…ë§Œí¼ì€ ê°ì§€í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ì²« ë²ˆì§¸ë¡œ ê°ì§€ëœ ê³³ì„ ë”°ë¼ ê±¸ì–´ê°€ë‹ˆ, ê·¸ê³³ì—ëŠ” ê±°ëŒ€í•œ í•˜ëŠ˜ì„¬ì´ ìë¦¬í•´ ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ì´ê³³ì— ê³µê°„ì˜ ì‹ ì „ì´ ìˆëŠ” ê±¸ê¹Œìš”?"
        ),
        "type": "item",
        "req_items": {"ë¶€ìœ ì„": 15}
    },
    {
        "id": 29,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - í•˜ëŠ˜ë¡œ ê°€ëŠ” ê¸¸",
        "story": (
            "í•˜ëŠ˜ì„¬ì€ ê³ ê°œë¥¼ ìµœëŒ€í•œ êº¾ì–´ ì˜¬ë ¤ë‹¤ë³´ì•„ë„ ê·¸ ëª¨ìŠµì„ ì „ë¶€ ë‹´ê¸° í˜ë“¤ì—ˆë‹µë‹ˆë‹¤.\n"
            "ì´ê³³ì„ ì–´ë–»ê²Œ ì˜¬ë¼ê°€ë©´ ì¢‹ì„ê¹Œìš”? ì˜¬ë¼ê°ˆ ìˆ˜ëŠ” ìˆì„ê¹Œìš”?\n"
            "ë‹¹ì‹ ì˜ ì—¬ì •ì— í•¨ê»˜í•˜ë˜ ë³´ëë¹› ì€í•˜ìƒˆ, ìƒ¤ì¼ë¼ê°€ ì•„ì£¼ ë°©ë²•ì´ ì—†ëŠ” ê±´ ì•„ë‹ˆë¼ë©° ì•„ëŠ” ê²ƒë“¤ì„ ê³µìœ í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤."
        ),
        "type": "investigate_with_char",
        "region": "ì•„ë¥´ì¹´ì›Œë“œ ì œë„",
        "char_name": "ìƒ¤ì¼ë¼",
        "count": 15
    },
    {
        "id": 30,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë“œë†’ì€ í•˜ëŠ˜ì„¬",
        "story": (
            "\"ì´ê³³ì€ 'ì•„ë¥´ì¹´ì›Œë“œ ì œë„'ì—ìš”. ë¨¼ ì˜›ë‚ , ì €ëŠ” ì´ê³³ì— ì‚¬ëŒë“¤ì´ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆê²Œë” ë„ì™€ì¤€ ì ì´ ìˆì—ˆì§€ìš”.\n"
            "ì˜ˆì „ë³´ë‹¤ëŠ” ë§ì´ ë‚®ì•„ì¡Œë„¤ìš”, ì´ì •ë„ë©´ ì € í˜¼ìì„œë„ ê°€ëŠ¥í• ì§€ë„ ëª¨ë¥´ê² ì–´ìš”.\n"
            "ì•½ê°„ì˜ ë³´ìˆ˜ë¥¼ ì¤€ë‹¤ë©´, ì €ê¸° ìˆëŠ” ì—˜ë¦¬ë² ì´í„°ë³´ë‹¤ ë¹ ë¥´ê³  ì•ˆì „í•˜ê²Œ ì—¬ëŸ¬ë¶„ì„ ì˜¬ë ¤ ë“œë¦´ê²Œìš”. ë‚˜ìœ ê±°ë˜ëŠ” ì•„ë‹ˆì£ ?\""
        ),
        "type": "money_donate",
        "amount": 100000
    },
    {
        "id": 31,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - íƒì‚¬ì§€ì—ì„œì˜ ì—¬í–‰",
        "story": (
            "ìƒ¤ì¼ë¼ì˜ ë„ì›€ìœ¼ë¡œ ì¼í–‰ì€ ë³¸ì„¬ì— ë°œì„ ë‚´ë”›ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "í•˜ëŠ˜ì„¬ì—ëŠ” ê´€ê´‘ ì•ˆë‚´ì†Œ, ë§¤ì , ê°ì¢… ì‹ë‹¹ì´ ì˜¤ë°€ì¡°ë°€ ëª¨ì—¬ ìˆì—ˆë‹µë‹ˆë‹¤. ë©€ë¦¬ì„œëŠ” ê±°ëŒ€í•œ ë‚˜ë¬´ê°€ íë¦¿í•˜ê²Œ ë³´ì˜€ìŠµë‹ˆë‹¤.\n"
            "ê´€ê´‘ì§€ê°€ ëœì§€ ìƒë‹¹íˆ ì˜¤ë˜ëœ ëª¨ì–‘ì´ì—ìš”.\n"
            "ì ë‹¹íˆ ì•„ë‹´í•œ ì‹ë‹¹ì—ì„œ ì ì‹¬ì„ í•´ê²°í•œ ì¼í–‰ì€, ê´€ë¦¬ì¸ì˜ í—ˆê°€ë¥¼ ë°›ê³  ê´€ê´‘ ë£¨íŠ¸ ë°”ê¹¥ì„ ë‘˜ëŸ¬ë³´ê¸°ë¡œ í•©ë‹ˆë‹¤."
        ),
        "type": "investigate",
        "region": "ì•„ë¥´ì¹´ì›Œë“œ ì œë„",
        "count": 30
    },
    {
        "id": 32,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì°½ê³µì˜ ë‚™ì›",
        "story": (
            "ë©€ë¦¬ì„œ ë³´ì´ëŠ” í•´ì„¤ì‚¬ì˜ ëª©ì†Œë¦¬ë¥¼ ê°€ë§Œíˆ ë“¤ì–´ë³´ë‹ˆ, ì´ê³³ì€ ê³µê°„ì˜ ì‹ í™”ê°€ ì§€ë‚´ë˜ ê³³ì€ ì•„ë‹Œ ëª¨ì–‘ì…ë‹ˆë‹¤.\n"
            "ì´ê³³ì€ 'ì°½ê³µì˜ ì „ì„¤'ì´ ì• í˜¸í•˜ë˜ ì‚¬ëŒë“¤ì„ ëª¨ì•„ë†“ì€ ê·¸ë…€ë§Œì˜ ë‚™ì›, 'ì•„ë¥´ì¹´ì›Œë“œ ì œë„' ë¼ê³  í•˜ë„¤ìš”.\n"
            "í•œë•Œ ë” ì•„ë¦„ë‹¤ì› ë˜ ì´ê³³ì€ ì¬ì•™ì´ ë‹¥ì³ì˜¤ê³  ì™„ì „íˆ ê³ ë¦½ë˜ì–´ ì§€ì˜¥ì´ ë˜ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì°½ê³µë§ˆí¬": 10}
    },
    {
        "id": 33,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë¹„ê·¹",
        "story": (
            "ë¨¹ì„ ê²ƒì´ ì—†ì–´ êµ¶ì–´ ì£½ì€ ì‚¬ëŒ, ì‹œì²´ë¼ë„ ë¨¹ìœ¼ë©° ì‚´ë‹¤ ë¯¸ì³ë²„ë¦° ì‚¬ëŒ, ë¯¸ì¹˜ê³  ì‹¶ì§€ ì•Šì•„ ì§€ìƒìœ¼ë¡œ ëª¸ì„ ë˜ì§„ ì‚¬ëŒ...\n"
            "í•˜ëŠ˜ ìœ„ì—ì„œ ê³ ì—¬ë²„ë¦° í”¼ì›…ë©ì´ë¥¼ ë‹¦ì€ ì‚¬ëŒì€, í‘¸ë¥¸ ë¨¸ë¦¬ì˜ ì†Œë…„ì´ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤.\n"
            "ì†Œë…„ì€ ì´ ìƒí™©ì„ ë³´ê³  í¬ê²Œ ìŠ¬í¼í•˜ë©° ìì‹ ì˜ ë¿”ì„ êº¾ì—ˆë‹¤ê³  í•´ìš”."
        ),
        "type": "item",
        "req_items": {"ìê·¸ë§ˆí•œ ë°”ëŒ": 5}
    },
    {
        "id": 34,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - êµ¬ì›",
        "story": (
            "ì†Œë…„ì€ êº¾ì€ ë¿”ì„ ë“¤ê³ , ì•„ë¥´ì¹´ì›Œë“œ ì œë„ë¥¼ ì˜¤ë¥´ê¸°ë¡œ í•©ë‹ˆë‹¤.\n"
            "ì€í•˜ìƒˆë“¤ì´ ì´ë¥¼ ë•ê¸° ìœ„í•´ ê°ì§€ì—ì„œ ë‚ ì•„ë“¤ê³  ì†Œë…„ì„ ë•ëŠ” ëª¨ìŠµì€, ë§ˆì¹˜ ë•… ìœ„ì— ì€í•˜ìˆ˜ê°€ ìˆ˜ë†“ì•„ì§„ ê²ƒ ê°™ì´ ì•„ë¦„ë‹¤ì› ë‹¤ê³  í•´ìš”.\n"
            "ì•„ë¬´ë„ ì˜¬ë¼ê°€ì§€ ëª»í•œ í•˜ëŠ˜ì„¬ì— ì†Œë…„ì´ ì˜¬ë¼ì™€ ìì‹ ì˜ ë¿”ì„ ë³¸ì„¬ì— ì‹¬ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤."
        ),
        "type": "investigate_with_char",
        "region": "ì•„ë¥´ì¹´ì›Œë“œ ì œë„",
        "char_name": "__USER__",
        "count": 20
    },
    {
        "id": 35,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì†Œë…„ì˜ ì—¼ì›",
        "story": (
            "ì‹¬ê²¨ì§„ ë¿”ì€ ë¹ ë¥´ê²Œ ìë¼ë‚˜ ê±°ëŒ€í•œ ë‚˜ë¬´ê°€ ë˜ì—ˆë‹¤ë„¤ìš”.\n"
            "ê²€í‘¸ë¥¸ ë‚˜ë¬´ê°€ í‘¸ë¥¸ ìê³¼ ë¶‰ì€ ê³¼ì‹¤ì„ ë§ºëŠ” ëª¨ìŠµì„, í•˜ëŠ˜ì„¬ì— ìˆë˜ ëª¨ë“  ì´ë“¤ì´ ëª©ë„í•˜ì˜€ìŠµë‹ˆë‹¤.\n"
            "íƒìŠ¤ëŸ¬ìš´ ì—´ë§¤ëŠ” ì£¼ë¯¼ë“¤ì´ ë°°ë¶ˆë¦¬ ë¨¹ê³ ë„ ë‚¨ì„ ë§Œí¼ ìë¼ë‚¬ê³ , ë¹„ë¡œì†Œ ê·¸ë“¤ì„ ì•…ìˆœí™˜ì—ì„œ ë²—ì–´ë‚˜ê²Œ í•´ì£¼ì—ˆë‹µë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì„¤êµ­ ì—´ë§¤": 10, "ë¬´ì§€ê°œ ì—´ë§¤": 10, "ì‚¬ë‘ë‚˜ë¬´ ê°€ì§€": 20}
    },
    {
        "id": 36,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì´ì–´ì§€ëŠ” í¬ë§",
        "story": (
            "ê·¸ ì†Œë…„ì€ ëˆ„êµ¬ì˜€ì„ê¹Œìš”? ì§€ê¸ˆë„ ì–´ë”˜ê°€ì—ì„œ ì‚¬ëŒì„ êµ¬í•˜ê³  ìˆì„ê¹Œìš”?\n"
            "ì›ë…ë“¤ì´ ë‹¤ì‹œê¸ˆ í•˜ëŠ˜ì— ë¨¹ì¹ ì„ í•˜ë ¤ ë“œëŠ” ì§€ê¸ˆ, ì–´ë–»ê²Œ ì¼ì„ í•´ê²°í•´ì•¼ í• ì§€ ëª°ë¼ ë§‰ë§‰í•˜ë˜ ë‹¹ì‹ ì—ê²Œ\n"
            "ì†Œë…„ì˜ ì´ì•¼ê¸°ëŠ” í•œ ì¤„ê¸° í¬ë§ê³¼ë„ ê°™ì•˜ì„ ê²ë‹ˆë‹¤.\n"
            "ì•„ì§ ì„¸ìƒì— ì‚¬ë‘ì€ ë‚¨ì•„ìˆë‹¤ëŠ” ê±°ë‹ˆê¹Œìš”.\n"
            "ì•„ì§ ì‚¬ëŒë“¤ì´ ë¯¿ê³  ê¸°ì–µí•˜ê³  ìˆë‹¤ëŠ” ë°˜ì¦ì´ë‹ˆê¹Œìš”."
        ),
        "type": "kill_multi",
        "targets": {"ì•„ì‚¬í•œ ì›ë…": 10, "ë³€ì§ˆëœ ë°”ëŒ": 10, "íí—ˆë¥¼ ì§€í‚¤ëŠ” ë¬¸ì§€ê¸°": 10}
    },
    {
        "id": 37,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë°”ë‹¤ë¡œ",
        "story": (
            "ê³µê°„ì˜ ì‹ ì „ì€ ì°¾ì§€ ëª»í–ˆì§€ë§Œ, ìˆ˜í™•ì´ ì—†ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤.\n"
            "ì¼í–‰ì€ ì•„ë¥´ì¹´ì›Œë“œ ì œë„ì—ì„œ ë‚´ë ¤ì™€ ë‹¤ë¥¸ ê¶Œì—­ì„ ì°¾ì•„ë³´ê¸°ë¡œ í•©ë‹ˆë‹¤.\n"
            "ë‹¤ìŒìœ¼ë¡œ ëŠê»´ì§€ëŠ” ê³³ì€ ë©€ê³  ë¨¼ ë°”ë‹¤ì˜€ë‹µë‹ˆë‹¤.\n"
            "ë°”ë‹¤ ë°‘ì˜ ì‹ ì „...ê³µê°„ì˜ ì‹ í™”ëŠ” ì´ê³³ì— ìˆì„ê¹Œìš”?\n"
            "í—˜í•œ ì—¬ì •ì´ ë  ê²ƒ ê°™ì§€ë§Œ...ì•„ì§ê¹Œì§€ ì´ì •í‘œê°€ ì¡´ì¬í•œë‹¤ëŠ” ì ì´, ë‹¹ì‹ ì´ ê·¸ ì´ì •í‘œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ ì‘ì€ ìœ„ì•ˆì„ ê°€ì ¸ì˜µë‹ˆë‹¤."
        ),
        "type": "region_unlock",
        "target_region": "ë…¸ë“œ í•´ì—­"
    },
    {
        "id": 38,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì„±ë‚œ ë°”ë‹¤ì˜ ì‚¬ëƒ¥",
        "story": (
            "ìƒ¤ì¼ë¼ì˜ ë±ƒë©€ë¯¸ê°€ ìƒê°ë³´ë‹¤ ì‹¬í•œ ëª¨ì–‘ì…ë‹ˆë‹¤.\n"
            "ë‹¹ì‹ ì€ ì¹´ì´ì•ˆ ëŒ€ì‹  ë°©í–¥í‚¤ë¥¼ ì¡ì•˜ê³ , ì¹´ì´ì•ˆì˜ ìƒ¤ì¼ë¼ì˜ ì¹˜ë£Œì— ì „ë…í•˜ê¸°ë¡œ í•©ë‹ˆë‹¤.\n"
            "ê·¸ë•Œì˜€ìŠµë‹ˆë‹¤.\n"
            "ë‚ ì”¨ê°€ ì ì  ë‚˜ë¹ ì§€ë”ë‹ˆ ìš©ì˜¤ë¦„ í˜„ìƒì´ ì¼ì–´ë‚©ë‹ˆë‹¤.\n"
            "ìˆœì‹ê°„ì— ì•„ë¹„ê·œí™˜ì´ ëœ ë°° ì•ˆ, ë°˜íŒŒëœ ë°°ê°€ ì¼í–‰ê³¼ í•¨ê»˜ ë°”ë‹·ì†ìœ¼ë¡œ ê°€ë¼ì•‰ìŠµë‹ˆë‹¤..."
        ),
        "type": "story_only"
    },
    {
        "id": 39,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - êµ¬ì‚¬ì¼ìƒ",
        "story": (
            "ì´ëŒ€ë¡œ ëì¸ ê±¸ê¹Œìš”? íë ¤ì§€ëŠ” ì˜ì‹ ëì—ì„œ, ë‹¹ì‹ ì€ ë³´ì•˜ìŠµë‹ˆë‹¤. ì¼í–‰ì—ê²Œ ë»—ì–´ì§€ëŠ” êµ¬ì›ì˜ ì†ê¸¸ì„ìš”.\n"
            "ê·¸ë“¤ì—ê²Œ ì†ì„ ë»—ê¸° ì „, ë‹¹ì‹ ì˜ ì˜ì‹ì´ ë°”ë‹·ì†ìœ¼ë¡œ ê¹Šê²Œ ì ê²¨ ë“¤ì–´ê°‘ë‹ˆë‹¤.\n"
            "\"ì´ë³´ê²Œ, ìë„¤ë“¤! ê´œì°®ì€ ê²ƒì´ëƒ?\"\n"
            "í•œì°¸ í›„, ë‹¹ì‹ ì„ ê¹¨ìš´ ê±´ ì–´ë–¤ ë‚­ë‘í•œ ì‹ ì˜ ëª©ì†Œë¦¬ì˜€ìŠµë‹ˆë‹¤."
        ),
        "type": "investigate",
        "region": "ë…¸ë“œ í•´ì—­",
        "count": 20
    },
    {
        "id": 40,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ëŒ€í•´ì˜ ì „ì„¤",
        "story": (
            "ì¼í–‰ì„ êµ¬í•´ì¤€ ìë“¤ì€ 'ë°”ì´í‚¹' ë“¤ì´ì—ˆìŠµë‹ˆë‹¤.\n"
            "ì´ë“¤ì€ ëŒ€í•´ì˜ ì „ì„¤, ì¹´ì´ì˜ ê¶Œì†ë“¤ì´ë¼ê³  í•˜ë„¤ìš”.\n"
            "ê·¸ë…€ì˜ ê¶Œì—­ì´ ë…¸ë“œ í•´ì—­ì„ ì§€í‚¤ê³ , ê³¤ê²½ì— ì²˜í•œ ì‚¬ëŒë“¤ì„ ë„ì™€ì£¼ëŠ” ì´ë“¤ì´ë¼ê³  í•©ë‹ˆë‹¤.\n"
            "\"ê°, ê°ì‚¬í•©ë‹ˆë‹¤! ì´ ì€í˜œë¥¼ ì–´ì°Œ ê°šì•„ì•¼ í• ì§€...\"\n"
            "ì˜ì‚°ì´ ë¶€ë„ëŸ¬ì›Œí•˜ë©° ë§ì„ êº¼ë‚´ê³ , 'ëŒ€í•´ì˜ ì „ì„¤' ì¹´ì´ëŠ” ê·¸ ë§ì„ ê¸°ë‹¤ë ¸ë‹¤ëŠ” ë“¯ ì…ì„ ë—ë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ë¬¼ê³ ê¸° ë¹„ëŠ˜": 5, "ë°”ë‹·ë¬¼ê³ ê¸° íšŒ": 3}
    },
    {
        "id": 41,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - í•œ ê°€ì§€ ì œì•ˆ",
        "story": (
            "\"í•˜í•˜í•«, ê·¸ ë§ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì—ˆë‹¤ë„¤, ë­ì˜ ì¡´ì¬ë“¤ì´ì—¬!\n"
            "ì´ ëª¸ì€ ì§€ê¸ˆ ê±°ë™ì´ ë¶ˆí¸í•œ ìƒíƒœë¼ì„œ, ê·¸ëŒ€ë“¤ì—ê²Œ ì‘ì€ ë¶€íƒì„ ê±´ë„¤ê³  ì‹¶ì—ˆë‹¤ë„¤.\n"
            "í˜¹ì‹œ, 'ì˜ì„¤ì˜ ì§€ë¶•'ì—ì„œ ì–¼ìŒ ëª‡ ê°œë¥¼ ê°€ì ¸ì™€ì¤„ ìˆ˜ ìˆê² ë‚˜? ê·¸ ì–¼ìŒì´ í™”ìƒì„ ê°€ë¼ì•‰íˆëŠ” ë°ì— ì˜ ë“¤ì–´ì„œ ë§ì´ë„¤!\"\n"
            "ì˜ì„¤ì˜ ì§€ë¶•? ê·¸ê³³ì€ ì–´ë””ì¼ê¹Œìš”? ìˆ˜ìˆ˜ê»˜ë¼ ê°™ì€ ì¹´ì´ì˜ ë§ì— ê°¸ìš°ëš±í•˜ë©´ì„œë„, ëª©ìˆ¨ì„ êµ¬í•´ì¤€ ê°’ì„ ì¹˜ë¥´ê¸° ìœ„í•´ì„œëŠ” í•´ë‚´ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì¹´ì´ì˜ ìë¹„": 3}
    },
    {
        "id": 42,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ìˆœí•­í•˜ëŠ” ê·€í™˜ê¸¸",
        "story": (
            "ë¬¼ ìœ„ë¡œ ì˜¬ë¼ê°€ë‹ˆ, ë°”ì´í‚¹ë“¤ì´ ë°°ë¥¼ ë§ë”í•˜ê²Œ ê³ ì³ë‘” ë’¤ì˜€ìŠµë‹ˆë‹¤.\n"
            "ë­ê¹Œì§€ ë‹¤ë‹¤ë¥¼ ìˆ˜ ìˆê²Œë” í•´ë¥˜ê°€ ì”ì”í•œ ê¸¸ë¡œë§Œ ë°°ë¥¼ ì¸ë„í•©ë‹ˆë‹¤. ì´ê±´ ì¹´ì´ì˜ ì€í˜œê² ì§€ìš”.\n"
            "ì´ì œ 'ì˜ì„¤ì˜ ì§€ë¶•'ì—ì„œ ì–¼ìŒì„ êµ¬í•´ì™€ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤...\n"
            "ë‹¤ì‹œ í•œ ë²ˆ ë±ƒë©€ë¯¸ì— ê³ í†µë°›ëŠ” ìƒ¤ì¼ë¼ê°€ í˜ë“¤ê²Œ ì œì•ˆì„ í•©ë‹ˆë‹¤.\n"
            "\"ì €ëŠ” ê·¸ê³³ì´ ì–´ë”˜ì§€ ì•Œì•„ìš”, ìœ¼ìœ¼...ì•„ì£¼ ì˜ ì•„ëŠ” ê³³ì´ì§€ìš”...ê·¸ëŸ¬ë‹ˆê¹Œ, ì € ë¨¼ì € ì´ê³³ì„ ë‚˜ê°€ë„ ë ê¹Œìš”?\""
        ),
        "type": "open_box",
        "count": 50
    },
    {
        "id": 43,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì˜ì„¤ì˜ ì§€ë¶•",
        "story": (
            "ìƒ¤ì¼ë¼ì˜ ì œì•ˆì„ ìˆ˜ë½í•˜ì, ìƒ¤ì¼ë¼ëŠ” í¬ë¥´ë¥´ ë‚ ì•„ê°€ë©° 'ì˜ì„¤ì˜ ì§€ë¶•'ì´ ì–´ë”˜ì§€ ë§í•´ì¤ë‹ˆë‹¤.\n"
            "ê·¸ê³³ì€, ì¼í•œì‚° ì •ìƒ.\n"
            "ê·¸ê³³ì— ë§ºíˆëŠ” ì–¼ìŒì€ ì•„ë¬´ë¦¬ ë¬´ë”ì›Œë„ ì ˆëŒ€ ë…¹ì§€ ì•ŠëŠ”ë‹¤ê³  í•˜ë„¤ìš”. 'í˜¹í•œì˜ ì „ì„¤' ì˜ì„¤ì˜ ê¸°ìš´ì´ ì„œë ¤ìˆë‹¤ë‚˜ ë­ë¼ë‚˜.\n"
            "ì¹´ì´ì˜ ê°€í˜¸ë¥¼ ë”°ë¼, ì¼í–‰ì€ ì¼í•œì‚° ë¶€ê·¼ í•´ì•ˆì— ì •ë°•í•©ë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ë”°ìŠ¤í•œ ëª©ë„ë¦¬": 40, "ë²„ë ¤ì§„ ì¥ê°‘": 200}
    },
    {
        "id": 44,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ì ˆê²½",
        "story": (
            "ì¼í•œì‚°ì€ ëª‡ ë²ˆì´ë‚˜ ë“¤ë €ì§€ë§Œ, ì‚´ì„ ë² ì–´ê°€ëŠ” ì¶”ìœ„ì™€ í¬ë¯¸í•œ ê³µê¸°ëŠ” ìµìˆ™í•´ì§€ì§ˆ ì•Šì•˜ìŠµë‹ˆë‹¤.\n"
            "ì‘ì€ ì¡°ê°ì˜ ë§ˆë²• ë•ë¶„ì— í° ë¬´ë¦¬ ì—†ì´ ì¼í•œì‚°ì„ íƒí—˜í•  ìˆ˜ ìˆì–´ì„œ ë§ì •ì´ì§€, ê·¸ê²Œ ì•„ë‹ˆì—ˆë‹¤ë©´ ë‹¹ì‹ ì˜ ì—¬ì •ì€ ì¼í•œì‚°ì˜ ì´ì •í‘œë¡œ ì ë“œëŠ” ê²ƒìœ¼ë¡œ ëì´ ë‚¬ê² ì§€ìš”.\n"
            "ì¼í•œì‚°ì˜ ì •ìƒì€ ë‹¤ì‹œ ë³´ì•„ë„ 'ì§€ë¶•'ì´ë¼ ë¶ˆë¦´ ë§Œí•œ, ì›…ì¥í•œ ê²½ì¹˜ë¥¼ ìë‘í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ëˆˆë©ì´": 300}
    },
    {
        "id": 45,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ë³´ë‹µê³¼ ì€í˜œ",
        "story": (
            "ì •ìƒì— ì–¼ì–´ìˆëŠ” ì–¼ìŒ, 'ì²œë…„ì–¼ìŒ' ì„ ì–»ì€ ì¼í–‰ì€ ë‹¤ì‹œ í•œ ë²ˆ ë…¸ë“œ í•´ì—­ìœ¼ë¡œ ëŒì•„ê°€ê¸°ë¡œ í•©ë‹ˆë‹¤.\n"
            "ì´ì œ ê¸¸ì„ ì•„ë‹ˆ, ë°°ëŠ” ë‹¤ì‹œ ëŒë ¤ì£¼ê³  ì¹´ì´ì•ˆì˜ ë§ˆë²•ìœ¼ë¡œ ì´ë™í•˜ê¸°ë¡œ í•©ë‹ˆë‹¤.\n"
            "ì´ëŸ° ê³³ì—ì„œ ë§ˆë²•ì€ êµ‰ì¥íˆ í¸í–ˆë‹µë‹ˆë‹¤.\n"
            "ë°”ì´í‚¹ë“¤ì´ ë‹¤ì‹œê¸ˆ ì¼í–‰ì„ ì¸ë„í•´ì£¼ê³ , ì²œë…„ì–¼ìŒì„ ë§Œì¡±ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“  ì¹´ì´ëŠ” ë§¤ìš° ê¸°ë»í•˜ë©° 'ê³µê°„ì˜ ì‹ ì „' ìˆœë¡€ê¸¸ì˜ ì¢Œí‘œë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì²œë…„ì–¼ìŒ": 10, "ì¼í•œì‚°ì˜ ì •ìˆ˜": 10}
    },
    {
        "id": 46,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ìˆœë¡€",
        "story": (
            "ìˆœë¡€ê¸¸ì€ í—˜ë‚œí–ˆìŠµë‹ˆë‹¤.\n"
            "ê·¸ë˜ë„, ì§€ê¸ˆê¹Œì§€ì˜ ì—¬ì •ì—ì„œ ìŒ“ì€ ê²½í—˜ìœ¼ë¡œ í•˜ë‚˜ë‘˜ì”© í—¤ì³ê°”ë‹µë‹ˆë‹¤.\n"
            "ì‹œê°„ì˜ ì‹ ì „ê³¼ ìƒëª…ì˜ ìˆ²ì—ì„œì˜ ì „íˆ¬ ê²½í—˜ìœ¼ë¡œ ì›ë…ë“¤ì„ ë² ì–´ë„˜ê¸°ê³ , ì¼í•œì‚°ê³¼ ë…¸ë“œ í•´ì—­ì—ì„œì˜ ê³ ìƒì€ ìˆœë¡€ê¸¸ì˜ í—˜ë‚œí•¨ì„ ê²¬ë””ê²Œ í•´ì£¼ëŠ” ê¸°ë‘¥ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.\n"
            "ê¿ˆì˜ ë³„ê³¼ ê¸°ì›ì˜ ìŒì„±ì—ì„œì˜ ê¸°ì–µì€ ì¼í–‰ê³¼ì˜ ê²°ì†ì„ ë‹¤ì§€ê²Œ í–ˆê³ , ì•„ë¥´ì¹´ì›Œë“œ ì œë„ì—ì„œ í–ˆë˜ ë‹¤ì§ì€ ì¼í–‰ì˜ ì´ì •í‘œê°€ ë˜ì–´ ì£¼ì—ˆë‹µë‹ˆë‹¤."
        ),
        "type": "investigate_multi",
        "targets": {
            "ì‹œê°„ì˜ ì‹ ì „": 40, "ì¼í•œì‚° ì¤‘í„±": 40, "ì´ë£¨ì§€ ëª»í•œ ê¿ˆë“¤ì˜ ë³„": 40, 
            "ìƒëª…ì˜ ìˆ²": 40, "ì•„ë¥´ì¹´ì›Œë“œ ì œë„": 40, "ë…¸ë“œ í•´ì—­": 40
        }
    },
    {
        "id": 47,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ê³µê°„ì˜ ì‹ ì „",
        "story": (
            "ë§ì€ ê³ í–‰ê³¼ ë‹¤ì§, ê·¸ëŸ¼ì—ë„ ìƒì§€ ì•Šì€ í¬ë§ì„ ê¸¸ì‚¼ì•„ ìˆœë¡€ê¸¸ì„ ë„˜ì–´ì˜¨ ì¼í–‰ì€ ë“œë””ì–´ ê³µê°„ì˜ ì‹ ì „ì— ë„ë‹¬í•©ë‹ˆë‹¤.\n"
            "ì‹œê°„ì˜ ì‹ ì „ì˜ ì°¨ë¶„í•˜ê³  ì¹¨ì°©í•œ ë¶„ìœ„ê¸°ì™€ ë‹¤ë¥´ê²Œ, ì™ìì§€ê»„í•˜ê³  í™”ê¸°ì• ì• í•œ ë¶„ìœ„ê¸°ê°€ ì¼í–‰ë“¤ì„ ë°˜ê¹ë‹ˆë‹¤.\n"
            "ê³µê°„ì˜ ì‹ í™”ëŠ” ì´ê³³ì—ì„œ ì„ ë¬¼ì„ ìˆ¨ê²¨ë‘ê±°ë‚˜, ì‘ì€ ë¹›ë¬´ë¦¬ë¥¼ ì„ ë¬¼í•˜ëŠ” ë“± ì‘ê²Œë‚˜ë§ˆ ì¡´ì¬ê°ì„ ë³´ì´ê³  ìˆì—ˆìŠµë‹ˆë‹¤."
        ),
        "type": "item",
        "req_items": {"ì¹´ì´ì˜ ìë¹„": 10, "ì•„ë¥´ì¹´ì›Œë“œì˜ ì˜ê´‘": 10}
    },
    {
        "id": 48,
        "title": "ê¸°ë§ì˜â˜…ì½”ìŠ¤ëª¨ìŠ¤ - ìˆ˜ìƒí•œ ì ‘ì„ ",
        "story": (
            "ë•ë¶„ì— ê³µê°„ì˜ ì‹ ì „ì€ ì–¸ì œë‚˜ ì¦ê±°ìš´ íŒŒí‹° ë¶„ìœ„ê¸°ëë‹ˆë‹¤. ê·¸ë“¤ì˜ ë°ì€ ê¸°ìš´ì—, ìˆœë¡€ê¸¸ì—ì„œ ë³´ì˜€ë˜ ì›ë…ë“¤ì€ ì´ê³³ì—ì„œë§Œí¼ì€ í˜ì„ ìƒê³  ê²ìŸì´ê°€ ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤.\n"
            "ê³µê°„ì˜ ì‹ í™”ëŠ” ì•„ì§ ì„¸ìƒì„ ì‚¬ë‘í•˜ëŠ” ëª¨ì–‘ì…ë‹ˆë‹¤.\n"
            "ê³µê°„ì˜ ì‹ í™”ì—ê²Œ ê¸°ë„í•˜ê¸° ìœ„í•´ ê¸°ë„ì‹¤ì„ ì°¾ë˜ ì¼í–‰ì—ê²Œ, ë¶‰ì€ ë¨¸ë¦¬ì˜ ì²­ë…„ì´ ë‹¤ê°€ì˜µë‹ˆë‹¤.\n"
            "ê·¸ ì²­ë…„ì€ ë‹¹ì‹ ë§Œì„ ë”°ë¡œ ë¶ˆëŸ¬, ìì‹ ì„ ë”°ë¼ì™€ì¤„ ìˆ˜ ìˆëƒê³  ë¬»ê³  ìˆì—ˆìŠµë‹ˆë‹¤."
        ),
        "type": "investigate",
        "region": "ê³µê°„ì˜ ì‹ ì „",
        "count": 40
    }
]


# --- ì§„í–‰ë„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ---
async def update_quest_progress(user_id, user_data, save_func, event_type, value=1, sub_key=None, extra_info=None):
    """
    (ì£¼ì˜: ì´ í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°(async)ë¡œ ë³€ê²½í•´ì•¼ ì €ì¥ í•¨ìˆ˜ë¥¼ await í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)
    """
    if not user_data: return
    # value: ì²˜ì¹˜ ìˆ˜, ì¡°ì‚¬ íšŸìˆ˜, ìƒì ê°œë´‰ ìˆ˜ ë“±
    # sub_key: ëª¬ìŠ¤í„° ì´ë¦„, ì§€ì—­ ì´ë¦„, ìºë¦­í„° í‚¤, ì•„ì´í…œ ì´ë¦„ ë“±
    # extra_info: (ë³´ìŠ¤ì „ í„´ ìˆ˜ ë“±) ì¶”ê°€ ì •ë³´

    q_idx = user_data.get("main_quest_index", 0)
    if q_idx >= len(MAIN_STORY): return 

    current_quest = MAIN_STORY[q_idx]
    q_type = current_quest["type"]
    
    q_prog = user_data.setdefault("main_quest_progress", {})
    
    if q_prog.get("id") != current_quest["id"]:
        # ì´ˆê¸°í™”: íƒ€ê²Ÿì´ ë”•ì…”ë„ˆë¦¬ë©´(ë‹¤ì¤‘ ëª©í‘œ) ë¹ˆ ë”•ì…”ë„ˆë¦¬ë¡œ, ì•„ë‹ˆë©´ 0ìœ¼ë¡œ
        init_val = {} if "targets" in current_quest else 0
        q_prog = {"id": current_quest["id"], "current": init_val}
        user_data["main_quest_progress"] = q_prog

    # ì¡°ê±´ ì²´í¬ ë¡œì§
    is_completed = False
    
    # 1. ë‹¨ì¼ ì²˜ì¹˜
    if q_type == "kill" and event_type == "kill":
        if sub_key == current_quest["target"]:
            q_prog["current"] = q_prog.get("current", 0) + value
            if q_prog["current"] >= current_quest["count"]: is_completed = True
            
    # 2. ë‹¤ì¤‘ ëª©í‘œ ì²˜ì¹˜
    elif q_type == "kill_multi" and event_type == "kill":
        targets = current_quest["targets"]
        if sub_key in targets:
            cur_dict = q_prog.get("current", {})
            if not isinstance(cur_dict, dict): cur_dict = {} 
            
            cur_dict[sub_key] = cur_dict.get(sub_key, 0) + value
            q_prog["current"] = cur_dict
            
            all_done = True
            for t_name, t_req in targets.items():
                if cur_dict.get(t_name, 0) < t_req:
                    all_done = False
                    break
            if all_done: is_completed = True

    # 3. ê·¸ë£¹ í‚¬ (ì—¬ëŸ¬ ëª¬ìŠ¤í„°ë¥¼ ì¡ì•„ë„ í•˜ë‚˜ì˜ ì¹´ìš´íŠ¸ë¡œ í•©ì‚°)
    elif q_type == "kill_group" and event_type == "kill":
        if sub_key in current_quest["targets"]:
            if isinstance(q_prog.get("current"), dict): q_prog["current"] = 0
            q_prog["current"] = q_prog.get("current", 0) + value
            if q_prog["current"] >= current_quest["count"]: is_completed = True

    # 4. ì´ë¦„ í¬í•¨ ì²˜ì¹˜
    elif q_type == "kill_include_name" and event_type == "kill":
        if current_quest["keyword"] in sub_key:
            q_prog["current"] = q_prog.get("current", 0) + value
            if q_prog["current"] >= current_quest["count"]: is_completed = True

    # 5. ì§€ì—­ ë‚´ ì•„ë¬´ ëª¬ìŠ¤í„° ì²˜ì¹˜
    elif q_type == "kill_any_in_region" and event_type == "kill_region":
        if sub_key == current_quest["region"]:
            q_prog["current"] = q_prog.get("current", 0) + value
            if q_prog["current"] >= current_quest["count"]: is_completed = True

    # [ìˆ˜ì •] 6. ë³´ìŠ¤ ì²˜ì¹˜ (í„´ ì œí•œ) - ì§„í–‰ë„(current) ì—…ë°ì´íŠ¸ ì¶”ê°€
    elif q_type == "kill_boss_limited_turn" and event_type == "kill":
        if sub_key == current_quest["target"]:
            # extra_infoë¡œ í„´ ìˆ˜ê°€ ë„˜ì–´ì™€ì•¼ í•¨
            turn_taken = extra_info if extra_info else 999
            if turn_taken <= current_quest["limit_turn"]:
                q_prog["current"] = 1  # [ì¤‘ìš”] ì™„ë£Œ ìƒíƒœë¥¼ ì €ì¥ (ì´ ë¶€ë¶„ì´ ëˆ„ë½ë˜ì–´ ìˆì—ˆìŒ)
                is_completed = True

    # 7. ì§€ì—­ í•´ê¸ˆ
    elif q_type == "region_unlock" and event_type == "region_unlock":
        if sub_key == current_quest["target_region"]:
            is_completed = True

    # 8. ìºë¦­í„° ì˜ì…
    elif q_type == "recruit" and event_type == "recruit":
        recruit_map = {"ì˜ì‚°": "Yeongsan", "ì–´ì¦ˆë ‰": "Earthreg", "ë£¨ìš°ë° 10%": "Luude10", "ì„¼ì‡¼": "Sensho", "ìƒ¤ì¼ë¼": "Shayla"}
        target_key = recruit_map.get(current_quest["target_char"])
        if sub_key == target_key:
            is_completed = True

    # 9. ì¡°ì‚¬ (ë‹¨ì¼)
    elif q_type == "investigate" and event_type == "investigate":
        if sub_key == current_quest["region"]:
            q_prog["current"] = q_prog.get("current", 0) + value
            if q_prog["current"] >= current_quest["count"]: is_completed = True

    # 10. ë‹¤ì¤‘ ì§€ì—­ ì¡°ì‚¬
    elif q_type == "investigate_multi" and event_type == "investigate":
        targets = current_quest["targets"]
        if sub_key in targets:
            cur_dict = q_prog.get("current", {})
            if not isinstance(cur_dict, dict): cur_dict = {}
            
            cur_dict[sub_key] = cur_dict.get(sub_key, 0) + value
            q_prog["current"] = cur_dict
            
            all_done = True
            for t_name, t_req in targets.items():
                if cur_dict.get(t_name, 0) < t_req:
                    all_done = False
                    break
            if all_done: is_completed = True

    # 11. íŠ¹ì • ìºë¦­í„°ë¡œ ì¡°ì‚¬
    elif q_type == "investigate_with_char" and event_type == "investigate":
        # í˜„ì¬ ì¡°ì‚¬ ì¤‘ì¸ ìºë¦­í„°ëŠ” extra_infoë‚˜ user_dataì—ì„œ í™•ì¸í•´ì•¼ í•¨
        # ì—¬ê¸°ì„œëŠ” extra_infoë¡œ ìºë¦­í„° ì´ë¦„ì„ ë„˜ê²¨ë°›ëŠ”ë‹¤ê³  ê°€ì •
        current_char = extra_info
        
        # [ì‹ ê·œ] __USER__ í‚¤ì›Œë“œ ì²˜ë¦¬ (ì²« ë²ˆì§¸ ìºë¦­í„°)
        if current_quest["char_name"] == "__USER__":
            first_char = user_data.get("characters", [])[0]["name"] if user_data.get("characters") else ""
            if sub_key == current_quest["region"] and current_char == first_char:
                q_prog["current"] = q_prog.get("current", 0) + value
                if q_prog["current"] >= current_quest["count"]: is_completed = True
        
        if sub_key == current_quest["region"] and current_char == current_quest["char_name"]:
            q_prog["current"] = q_prog.get("current", 0) + value
            if q_prog["current"] >= current_quest["count"]: is_completed = True

    # 12. ì œì‘ (craft)
    elif q_type == "craft" and event_type == "craft":
        if sub_key == current_quest["target"]:
            q_prog["current"] = q_prog.get("current", 0) + value
            if q_prog["current"] >= current_quest["count"]: is_completed = True

    # [ì‹ ê·œ] 13. ìƒì ê°œë´‰ (open_box)
    elif q_type == "open_box" and event_type == "open_box":
        q_prog["current"] = q_prog.get("current", 0) + value
        if q_prog["current"] >= current_quest["count"]: is_completed = True

    await save_func(user_id, user_data)


# --- UI ë·° ---
class MainStoryView(discord.ui.View):
    def __init__(self, author, user_data, all_data, save_func):
        super().__init__(timeout=60)
        self.author = author
        self.user_data = user_data
        # self.all_data = all_data # ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
        self.save_func = save_func
        self.current_quest_idx = self.user_data.get("main_quest_index", 0)
        self.display_idx = self.current_quest_idx
        self.update_view()

    async def interaction_check(self, interaction: discord.Interaction) -> bool:
        if interaction.user != self.author:
            await interaction.response.send_message("ë³¸ì¸ì˜ ìŠ¤í† ë¦¬ë§Œ ì¡°ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", ephemeral=True)
            return False
        
        # ë°ì´í„° ê°±ì‹  ë¡œì§ì´ í•„ìš”í•˜ë‹¤ë©´ get_user_dataë¥¼ ì£¼ì…ë°›ì•„ì•¼ í•˜ì§€ë§Œ, 
        # í˜„ì¬ êµ¬ì¡°ìƒ self.user_dataë¥¼ ì‹ ë¢°í•˜ê±°ë‚˜ ì™¸ë¶€ì—ì„œ ê°±ì‹ í•´ì•¼ í•©ë‹ˆë‹¤.
        # ì—¬ê¸°ì„œëŠ” JSON ë¦¬ë¡œë“œë¥¼ ì œê±°í•˜ì—¬ NoneType ì—ëŸ¬ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
        self.current_quest_idx = self.user_data.get("main_quest_index", 0)
        return True

    def update_view(self):
        self.clear_items()
        
        # Navigation buttons
        prev_btn = discord.ui.Button(label="â—€ï¸ ì´ì „", style=discord.ButtonStyle.secondary, disabled=(self.display_idx == 0))
        prev_btn.callback = self.prev_story
        self.add_item(prev_btn)

        counter_btn = discord.ui.Button(label=f"{self.display_idx + 1} / {len(MAIN_STORY)}", style=discord.ButtonStyle.secondary, disabled=True)
        self.add_item(counter_btn)

        next_btn = discord.ui.Button(label="ë‹¤ìŒ â–¶ï¸", style=discord.ButtonStyle.secondary, disabled=(self.display_idx >= len(MAIN_STORY) - 1))
        next_btn.callback = self.next_story
        self.add_item(next_btn)

        # Conditional complete button
        if self.display_idx == self.current_quest_idx and self.current_quest_idx < len(MAIN_STORY):
            complete_btn = discord.ui.Button(label="âœ… í€˜ìŠ¤íŠ¸ ì™„ë£Œ/ì§„í–‰", style=discord.ButtonStyle.success, row=1)
            complete_btn.callback = self.complete_quest
            self.add_item(complete_btn)

    async def prev_story(self, interaction: discord.Interaction):
        self.display_idx -= 1
        self.update_view()
        embed = self.create_story_embed()
        await interaction.response.edit_message(embed=embed, view=self)

    async def next_story(self, interaction: discord.Interaction):
        self.display_idx += 1
        self.update_view()
        embed = self.create_story_embed()
        await interaction.response.edit_message(embed=embed, view=self)

    def create_story_embed(self):
        if self.display_idx >= len(MAIN_STORY):
            return discord.Embed(title="???", description="ì•„ì§ ì´ì•¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.", color=discord.Color.dark_grey())

        quest = MAIN_STORY[self.display_idx]
        embed = discord.Embed(title=f"#{quest['id']}: {quest['title']}", description=quest['story'], color=discord.Color.blue())
        
        status_text = ""
        if self.display_idx < self.current_quest_idx:
            status_text = "âœ… ì™„ë£Œëœ ì´ì•¼ê¸°ì…ë‹ˆë‹¤."
            embed.color = discord.Color.dark_green()
        elif self.display_idx > self.current_quest_idx:
            status_text = "ğŸ”’ ì•„ì§ ë„ë‹¬í•˜ì§€ ëª»í•œ ì´ì•¼ê¸°ì…ë‹ˆë‹¤."
            embed.color = discord.Color.dark_grey()
        else: # Current quest
            progress = self.user_data.get("main_quest_progress", {})
            q_type = quest["type"]
            curr = progress.get("current", 0)
            
            if q_type == "item":
                inv = self.user_data.get("inventory", {})
                req_text = []
                for item, count in quest["req_items"].items():
                    has = inv.get(item, 0)
                    req_text.append(f"ğŸ“¦ **{item}** : {has}/{count}")
                status_text = "\n".join(req_text)
            elif q_type == "money_donate":
                has_money = self.user_data.get("money", 0)
                status_text = f"ğŸ’° ë³´ìœ  ê¸ˆì•¡ : {has_money:,}/{quest['amount']:,}ì›"
            elif q_type == "kill_boss_limited_turn":
                status_text = f"âš”ï¸ **{quest['target']}** ì²˜ì¹˜ (í„´ ì œí•œ: {quest['limit_turn']})"
                if curr >= 1: status_text += " (ì™„ë£Œ)"
            elif q_type == "kill":
                status_text = f"ğŸ¯ **{quest['target']}** : {curr}/{quest['count']} ì²˜ì¹˜"
            elif q_type == "kill_multi" or q_type == "investigate_multi":
                t_status = []
                curr_dict = curr if isinstance(curr, dict) else {}
                for t_name, t_req in quest["targets"].items():
                    c_val = curr_dict.get(t_name, 0)
                    icon = "ğŸ¯" if "kill" in q_type else "ğŸ”"
                    t_status.append(f"{icon} **{t_name}** : {c_val}/{t_req}")
                status_text = "\n".join(t_status)
            elif q_type == "kill_group":
                status_text = f"ğŸ¯ **{quest['display_name']}** : {curr}/{quest['count']} ì²˜ì¹˜"
            elif q_type == "kill_include_name":
                status_text = f"ğŸ¯ **'{quest['keyword']}'** í¬í•¨ ëª¬ìŠ¤í„° : {curr}/{quest['count']} ì²˜ì¹˜"
            elif q_type == "kill_any_in_region":
                status_text = f"ğŸ—ºï¸ **{quest['region']}** ëª¬ìŠ¤í„° : {curr}/{quest['count']} ì²˜ì¹˜"
            elif q_type == "investigate":
                status_text = f"ğŸ” **{quest['region']}** ì¡°ì‚¬ : {curr}/{quest['count']}íšŒ"
            elif q_type == "investigate_with_char":
                char_name = quest['char_name']
                if char_name == "__USER__":
                    first_char_name = self.user_data.get("characters", [{}])[0].get("name", "ì²« ë²ˆì§¸ ë™ë£Œ")
                    char_name = f"[{first_char_name}]"
                status_text = f"ğŸ•µï¸ **{char_name}**(ìœ¼)ë¡œ **{quest['region']}** ì¡°ì‚¬ : {curr}/{quest['count']}íšŒ"
            elif q_type == "craft":
                status_text = f"ğŸ”¨ **{quest['target']}** ì œì‘ : {curr}/{quest['count']}ê°œ"
            elif q_type == "region_unlock":
                status_text = f"ğŸ”“ **{quest['target_region']}** ì§€ì—­ í•´ê¸ˆ"
            elif q_type == "recruit":
                status_text = f"ğŸ‘¤ **{quest['target_char']}** ì˜ì…"
            elif q_type == "open_box":
                status_text = f"ğŸ“¦ ë³´ë¬¼ìƒì ê°œë´‰ : {curr}/{quest['count']}íšŒ"
            elif q_type == "story_only":
                status_text = "âœ… ë‹¤ìŒ ì´ì•¼ê¸°ë¡œ ë„˜ì–´ê°€ì„¸ìš”."
            
            embed.color = discord.Color.gold()

        embed.add_field(name="ì§„í–‰ ìƒí™©", value=status_text, inline=False)
        return embed

    async def complete_quest(self, interaction: discord.Interaction):
        if self.current_quest_idx >= len(MAIN_STORY):
            return await interaction.response.edit_message(content="ğŸ‰ í˜„ì¬ ê³µê°œëœ ëª¨ë“  ë©”ì¸ ìŠ¤í† ë¦¬ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!", embed=None, view=None)

        quest = MAIN_STORY[self.current_quest_idx]
        progress = self.user_data.get("main_quest_progress", {})
        
        is_done = False
        status_text = ""
        
        # 1. ì•„ì´í…œ ë‚©í’ˆ í€˜ìŠ¤íŠ¸
        if quest["type"] == "item":
            inv = self.user_data.get("inventory", {})
            can_finish = True
            req_text = []
            for item, count in quest["req_items"].items():
                has = inv.get(item, 0)
                req_text.append(f"ğŸ“¦ **{item}** : {has}/{count}")
                if has < count: can_finish = False
            
            status_text = "\n".join(req_text)
            if can_finish:
                for item, count in quest["req_items"].items():
                    inv[item] -= count
                    if inv[item] <= 0: del inv[item]
                is_done = True
        
        # 2. ê¸°ë¶€ í€˜ìŠ¤íŠ¸
        elif quest["type"] == "money_donate":
            has_money = self.user_data.get("money", 0)
            status_text = f"ğŸ’° ë³´ìœ  ê¸ˆì•¡ : {has_money:,}/{quest['amount']:,}ì›"
            if has_money >= quest["amount"]:
                self.user_data["money"] -= quest["amount"]
                is_done = True

        # [ì‹ ê·œ] 3. ë³´ìŠ¤ í„´ ì œí•œ ì²˜ì¹˜ (ì „íˆ¬ ì§„ì… ë¡œì§)
        elif quest["type"] == "kill_boss_limited_turn":
            curr = progress.get("current", 0)
            
            if curr >= 1:
                # ì´ë¯¸ ì™„ë£Œëœ ìƒíƒœë©´ ì™„ë£Œ ì²˜ë¦¬ë¡œ ë„˜ì–´ê°
                is_done = True
                status_text = f"âœ… **{quest['target']}** ì²˜ì¹˜ ì™„ë£Œ"
            else:
                # [ìˆ˜ì •] ìˆœí™˜ ì°¸ì¡° ë°©ì§€ë¥¼ ìœ„í•œ í•¨ìˆ˜ ë‚´ ì„í¬íŠ¸
                from battle import BattleView
                from monsters import spawn_monster

                # ì•„ì§ ì²˜ì¹˜ ëª»í–ˆìœ¼ë©´ ë°”ë¡œ ì „íˆ¬ ì‹œì‘
                # ìºë¦­í„° ì •ë³´ ë¡œë“œ
                char_idx = self.user_data.get("investigator_index", 0)
                chars = self.user_data.get("characters", [])
                
                if not chars:
                    return await interaction.response.send_message("âŒ ì „íˆ¬ì— ë‚˜ê°ˆ ìºë¦­í„°ê°€ ì—†ìŠµë‹ˆë‹¤.", ephemeral=True)
                
                if char_idx >= len(chars):
                    char_idx = 0
                    self.user_data["investigator_index"] = 0
                
                player_data = chars[char_idx]
                player = Character.from_dict(player_data)
                
                # ë°©ì–´ìœ¨ ì ìš©
                player.defense_rate = player_data.get("defense_rate", 0)
                
                # ëª¬ìŠ¤í„° ìƒì„±
                monster_name = quest["target"]
                target_monster = spawn_monster(monster_name)
                
                # BattleView ìƒì„± (victory_callbackì€ battle.py ë‚´ë¶€ì—ì„œ í€˜ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì²˜ë¦¬í•¨)
                view = BattleView(
                    self.author, player, [target_monster], 
                    self.user_data, self.save_func, 
                    char_index=char_idx
                )
                
                embed = discord.Embed(
                    title=f"âš ï¸ **{monster_name}** ì¶œí˜„!", 
                    description=f"ìŠ¤í† ë¦¬ ë³´ìŠ¤ ì „íˆ¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤!\n**{quest['limit_turn']}í„´** ë‚´ì— ì²˜ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.", 
                    color=discord.Color.red()
                )
                
                # ê¸°ì¡´ ë©”ì‹œì§€ë¥¼ ì „íˆ¬ í™”ë©´ìœ¼ë¡œ êµì²´
                await interaction.response.edit_message(content=None, embed=embed, view=view)
                return  # ì „íˆ¬ë¡œ ë„˜ì–´ê°”ìœ¼ë¯€ë¡œ ì´í›„ ë¡œì§(í€˜ìŠ¤íŠ¸ ì™„ë£Œ ë©”ì‹œì§€ ë“±)ì€ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ

        # 4. ê·¸ ì™¸ ì§„í–‰ë„ ì²´í¬í˜• í€˜ìŠ¤íŠ¸
        else:
            curr = progress.get("current", 0)
            
            if quest["type"] == "kill":
                status_text = f"ğŸ¯ **{quest['target']}** : {curr}/{quest['count']} ì²˜ì¹˜"
                if curr >= quest["count"]: is_done = True
                
            elif quest["type"] == "kill_multi":
                t_status = []
                all_pass = True
                curr_dict = curr if isinstance(curr, dict) else {}
                for t_name, t_req in quest["targets"].items():
                    c_val = curr_dict.get(t_name, 0)
                    t_status.append(f"ğŸ¯ **{t_name}** : {c_val}/{t_req}")
                    if c_val < t_req: all_pass = False
                status_text = "\n".join(t_status)
                if all_pass: is_done = True

            elif quest["type"] == "kill_group":
                status_text = f"ğŸ¯ **{quest['display_name']}** : {curr}/{quest['count']} ì²˜ì¹˜"
                if curr >= quest["count"]: is_done = True
            
            elif quest["type"] == "kill_include_name":
                status_text = f"ğŸ¯ **'{quest['keyword']}'** í¬í•¨ ëª¬ìŠ¤í„° : {curr}/{quest['count']} ì²˜ì¹˜"
                if curr >= quest["count"]: is_done = True

            elif quest["type"] == "kill_any_in_region":
                status_text = f"ğŸ—ºï¸ **{quest['region']}** ëª¬ìŠ¤í„° : {curr}/{quest['count']} ì²˜ì¹˜"
                if curr >= quest["count"]: is_done = True
                
            elif quest["type"] == "investigate":
                status_text = f"ğŸ” **{quest['region']}** ì¡°ì‚¬ : {curr}/{quest['count']}íšŒ"
                if curr >= quest["count"]: is_done = True
            
            elif quest["type"] == "investigate_multi":
                t_status = []
                all_pass = True
                curr_dict = curr if isinstance(curr, dict) else {}
                for t_name, t_req in quest["targets"].items():
                    c_val = curr_dict.get(t_name, 0)
                    t_status.append(f"ğŸ” **{t_name}** : {c_val}/{t_req}")
                    if c_val < t_req: all_pass = False
                status_text = "\n".join(t_status)
                if all_pass: is_done = True

            elif quest["type"] == "investigate_with_char":
                status_text = f"ğŸ•µï¸ **[{quest['char_name']}]**ìœ¼ë¡œ **{quest['region']}** ì¡°ì‚¬ : {curr}/{quest['count']}íšŒ"
                if curr >= quest["count"]: is_done = True

            elif quest["type"] == "craft":
                status_text = f"ğŸ”¨ **{quest['target']}** ì œì‘ : {curr}/{quest['count']}ê°œ"
                if curr >= quest["count"]: is_done = True

            elif quest["type"] == "region_unlock":
                if quest["target_region"] in self.user_data.get("unlocked_regions", []):
                    is_done = True
                    status_text = f"ğŸ”“ **{quest['target_region']}** í•´ê¸ˆ ì™„ë£Œ"
                else:
                    status_text = f"ğŸ”’ **{quest['target_region']}** ë¯¸í•´ê¸ˆ"
                    
            elif quest["type"] == "recruit":
                recruit_map = {"ì˜ì‚°": "Yeongsan", "ì–´ì¦ˆë ‰": "Earthreg", "ë£¨ìš°ë° 10%": "Luude10", "ì„¼ì‡¼": "Sensho", "ìƒ¤ì¼ë¼": "Shayla"}
                target_key = recruit_map.get(quest["target_char"])
                owned = any(c.get("name") == quest["target_char"] for c in self.user_data.get("characters", []))
                
                if owned:
                    is_done = True
                    status_text = f"ğŸ¤ **{quest['target_char']}** ì˜ì… ì™„ë£Œ"
                else:
                    status_text = f"ğŸ‘¤ **{quest['target_char']}** ë¯¸ì˜ì…"

            elif quest["type"] == "open_box":
                status_text = f"ğŸ“¦ ë³´ë¬¼ìƒì ê°œë´‰ : {curr}/{quest['count']}íšŒ"
                if curr >= quest["count"]: is_done = True

            elif quest["type"] == "story_only":
                is_done = True
                status_text = "âœ… ìŠ¤í† ë¦¬ í™•ì¸ ì™„ë£Œ"

        # ê²°ê³¼ ì¶œë ¥
        embed = discord.Embed(title=quest["title"], description=quest["story"], color=discord.Color.blue())
        embed.add_field(name="ì§„í–‰ ìƒí™©", value=status_text, inline=False)
        
        if is_done:
            self.user_data["main_quest_index"] = self.current_quest_idx + 1
            self.user_data["main_quest_progress"] = {} 
            
            # ìƒíƒœ ì—…ë°ì´íŠ¸
            self.current_quest_idx += 1
            self.display_idx = self.current_quest_idx
            
            # [íŠ¹ìˆ˜ ë³´ìƒ] ì¹´ì´ì•ˆ ì˜ì… (13ë²ˆ)
            if quest["id"] == 13:
                kaian_char = {
                    "name": "ì¹´ì´ì•ˆ",
                    "hp": 300,
                    "max_hp": 300,
                    "current_hp": 300,
                    "max_mental": 270,
                    "current_mental": 270,
                    "attack": 27,
                    "defense": 43,
                    "card_slots": 6,
                    "equipped_cards": ["ì‹œê°„ìˆ ì‹:ê¸°ë³¸í˜•", "ì‹œê°„ìˆ ì‹:1ì¥", "ì‹œê°„ìˆ ì‹:1ì¥ ì‘ìš©"],
                    "is_recruited": True
                }
                if not any(c.get("name") == "ì¹´ì´ì•ˆ" for c in self.user_data.get("characters", [])):
                    self.user_data["characters"].append(kaian_char)
                    embed.add_field(name="ğŸ ë³´ìƒ", value="**ì¹´ì´ì•ˆ**ì´ ë™ë£Œë¡œ í•©ë¥˜í–ˆìŠµë‹ˆë‹¤!", inline=False)

            # [íŠ¹ìˆ˜ ë³´ìƒ] 46ë²ˆ í€˜ìŠ¤íŠ¸ ì™„ë£Œ -> ê³µê°„ì˜ ì‹ ì „ í•´ê¸ˆ
            if quest["id"] == 46:
                if "ê³µê°„ì˜ ì‹ ì „" not in self.user_data.get("unlocked_regions", []):
                    self.user_data.setdefault("unlocked_regions", []).append("ê³µê°„ì˜ ì‹ ì „")
                    embed.add_field(name="ğŸ ë³´ìƒ", value="ğŸ”“ **[ê³µê°„ì˜ ì‹ ì „]** ì§€ì—­ì´ í•´ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤!", inline=False)

            # [íŠ¹ìˆ˜ ë³´ìƒ] ìƒ¤ì¼ë¼ ì˜ì… ì™„ë£Œ (26ë²ˆ) -> ì•„ë¥´ì¹´ì›Œë“œ ì œë„ í•´ê¸ˆ
            if quest["id"] == 26:
                if "ì•„ë¥´ì¹´ì›Œë“œ ì œë„" not in self.user_data.get("unlocked_regions", []):
                    self.user_data.setdefault("unlocked_regions", []).append("ì•„ë¥´ì¹´ì›Œë“œ ì œë„")
                    embed.add_field(name="ğŸ ë³´ìƒ", value="ğŸ”“ **[ì•„ë¥´ì¹´ì›Œë“œ ì œë„]** ì§€ì—­ì´ í•´ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤!", inline=False)

            # ë·° ê°±ì‹  ë° ì €ì¥
            self.update_view()
            await self.save_func(self.author.id, self.user_data)
            
            # ì™„ë£Œ ë©”ì‹œì§€ ìˆ˜ì •
            embed.title = f"âœ… {embed.title} ì™„ë£Œ!"
            await interaction.response.edit_message(content="í€˜ìŠ¤íŠ¸ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ë‹¤ìŒ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•˜ì„¸ìš”.", embed=embed, view=self)
        else:
            # ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë©´, í˜„ì¬ ìƒíƒœë§Œ ë‹¤ì‹œ ë³´ì—¬ì¤Œ
            await interaction.response.edit_message(content="âŒ ì•„ì§ ì¡°ê±´ì„ ë‹¬ì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.", embed=embed, view=self)